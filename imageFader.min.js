(function(a){a.fn.imageFader=function(b){if(c[b]){return c[b].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof b==="object"||!b){return c.init.apply(this,arguments)}else{a.error("Method "+b+" does not exist in MultiTips")}};var b;var c={init:function(a){d(this,a)},pause:function(){e(this)},play:function(){f(this)},next:function(){g(this)},prev:function(){h(this)},goTo:function(a){i(this,a)},update:function(){j(this)}};var d=function(c,d){b=a.extend({startPosition:0,autoPlay:true,animationSpeed:500,animationDelay:4e3,captions:false,captionAttr:"title",animationStart:function(a){},animationEnd:function(a){}},d);k(c,d);a(window).resize(function(){var b=c.children("li").children("img");b.css("max-width",c.width()).css("max-height",c.height());b.each(function(){if(a(this).width()>0&&a(this).parent().is(":visible")){a(this).css("margin-left",(c.width()-a(this).width())/2).css("margin-top",(c.height()-a(this).height())/2)}else if(a(this).parent().is(":visible")===false){a(this).parent().show();a(this).css("margin-left",(c.width()-a(this).width())/2).css("margin-top",(c.height()-a(this).height())/2);a(this).parent().hide()}else{a(this).load(function(){a(this).css("margin-left",(c.width()-a(this).width())/2).css("margin-top",(c.height()-a(this).height())/2)})}})})};var e=function(){b.autoPlay=false};var f=function(a){b.autoPlay=true;l(a)};var g=function(a){e();l(a)};var h=function(b){e();b.children("li").each(function(){if(a(this).hasClass("visibleImg")){if(a(this).index()===0){if(b.children("li").last().children("img").width>0&&b.children("li").last().children("img").is(":visible")){m(b.children("li").last(),a(this),b)}else if(b.children("li").last().children("img").is(":visible")===false){m(b.children("li").last(),a(this),b)}else{b.children("li").last().children("img").load(function(){m(b.children("li").last(),a(this),b)})}}else{if(a(this).prev().children("img").width>0&&a(this).prev().children("img").is(":visible")){m(a(this).prev(),a(this),b)}else if(a(this).prev().children("img").is(":visible")===false){m(a(this).prev(),a(this),b)}else{a(this).prev().children("img").load(function(){m(a(this).prev(),a(this),b)})}}}})};var i=function(b,c){if(c>b.children("li").length-1){console.log("Error: No image at position "+c)}else{e();b.children("li").each(function(){if(a(this).hasClass("visibleImg")){if(b.children("li").eq(c).children("img").width>0&&b.children("li").eq(c).children("img").is(":visible")){m(b.children("li").eq(c),a(this),b)}else if(b.children("li").eq(c).children("img").is(":visible")===false){m(b.children("li").eq(c),a(this),b)}else{b.children("li").eq(c).children("img").load(function(){m(b.children("li").eq(c),a(this),b)})}}})}};var j=function(c){a(".imageFaderCaption").remove();c.children("li").removeClass("hiddenImg").removeClass("visibleImg").show();if(b.autoPlay===true){e(c);k(c);setTimeout(function(){f(c)},b.animationDelay)}else{k(c)}};var k=function(c,d){var e=c.children("li").children("img");e.css("max-width",c.width()).css("max-height",c.height());c.children("li").css("position","absolute").css("padding","0").css("margin","0").css("width","100%").css("height","100%");c.css("list-style-type","none").css("padding","0").css("margin","0");if(b.captions===true){c.children("li").each(function(c){var d=a(this).children("img").first().attr(b.captionAttr);a(this).append("<div id='imgCaption"+c+"' class='imageFaderCaption'>"+d+"</div>")})}e.each(function(){a(this).parent().addClass("hiddenImg");if(a(this).width()>0){a(this).css("margin-left",(c.width()-a(this).width())/2).css("margin-top",(c.height()-a(this).height())/2);if(a(this).parent().index()!=b.startPosition){a(this).parent().hide()}else{a(this).parent().removeClass("hiddenImg");a(this).parent().addClass("visibleImg");if(b.autoPlay===true){setTimeout(function(){l(c,d)},b.animationDelay)}}}else{a(this).load(function(){a(this).css("margin-left",(c.width()-a(this).width())/2).css("margin-top",(c.height()-a(this).height())/2);if(a(this).parent().index()!=b.startPosition){a(this).parent().hide()}else{a(this).parent().removeClass("hiddenImg");a(this).parent().addClass("visibleImg");setTimeout(function(){if(b.autoPlay===true){l(c,d)}},b.animationDelay)}})}})};var l=function(b,c){b.children("li").each(function(){if(a(this).hasClass("visibleImg")){if(a(this).index()===b.children("li").length-1){if(b.children("li").first().children("img").width>0&&b.children("li").first().children("img").is(":visible")){m(b.children("li").first(),a(this),b,c)}else if(b.children("li").first().children("img").is(":visible")===false){m(b.children("li").first(),a(this),b,c)}else{b.children("li").first().children("img").load(function(){m(b.children("li").first(),a(this),b,c)})}}else{if(a(this).next().children("img").width>0&&a(this).next().children("img").is(":visible")){m(a(this).next(),a(this),b,c)}else if(a(this).next().children("img").is(":visible")===false){m(a(this).next(),a(this),b,c)}else{a(this).next().children("img").load(function(){m(a(this).next(),a(this),b,c)})}}}})};var m=function(a,c,d,e){var f={index:c.index()};b.animationStart(f);a.fadeIn(b.animationSpeed);c.fadeOut(b.animationSpeed);setTimeout(function(){f={index:a.index()};b.animationEnd(f);a.addClass("visibleImg");a.removeClass("hiddenImg");c.removeClass("visibleImg");c.addClass("hiddenImg");setTimeout(function(){if(b.autoPlay===true){l(d,e)}},b.animationDelay)},b.animationSpeed)}})(jQuery)